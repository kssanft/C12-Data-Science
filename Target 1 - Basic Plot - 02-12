library(tidyverse)
library(ggplot2)
library(dplyr)

gdp_per_capita <- read.csv("gdp-per-capita-worldbank.csv")
continents <- read.csv("continents-according-to-our-world-in-data.csv")

#View(gdp_per_capita)
#View(continents)


gdp_per_capita2 <- gdp_per_capita %>%
  rename(GDP = GDP.per.capita..PPP..constant.2017.international... ) %>%
  group_by(Code) %>%
    mutate(GDP_growth_rate = (GDP - lag(GDP)) / lag(GDP) * 100) %>%
  ungroup ()%>%
  select(Code,Entity, Year, GDP_growth_rate) %>%
  left_join (continents %>% select (Code, Continent), by = "Code") %>%
  drop_na()

growth <- gdp_per_capita2 %>%
  group_by(Continent, Year) %>%
  summarise (avg_GDP_growth = mean(GDP_growth_rate, na.rm = TRUE)) 

# Plot
ggplot(continent_growth, aes(x = Year, y = avg_GDP_growth, color = Continent)) +
  geom_line(size = 1) +
  labs(
    title = "Average GDP per Capita Growth Rate by Continent Over Time",
    x = "Year",
    y = "Average GDP per Capita Growth Rate (%)"
  ) +
  theme_minimal() +
  theme(
    text = element_text(size = 11),
    legend.title = element_text(size = 11),
    legend.text = element_text(size = 10)
  )

#View(gdp_per_capita2)
